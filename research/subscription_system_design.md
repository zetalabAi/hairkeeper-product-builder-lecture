# 머리보존 AI - 구독 요금제 및 크레딧 시스템 설계

## 1. 서비스 개요

머리보존 AI는 헤어 디자이너와 고객을 위한 얼굴 합성 서비스로, 사용자가 업로드한 사진에 9명의 한국인 얼굴 세트(다각도 포함)를 적용하여 이미지 및 영상을 생성합니다.

### 핵심 기능
- **이미지 합성**: 사용자 사진 + 선택한 얼굴 → 합성 이미지
- **영상 생성**: 합성 이미지 → 5초 릴스 영상

---

## 2. 구독 요금제 설계

### 2.1 무료 플랜 (Free)

**가격**: $0/월

**포함 크레딧**:
- 최초 가입: 3회 무료 (이미지 합성 + 영상 생성 가능)
- 매주 월요일 오전 9시 (한국 시간): 2회 자동 충전

**사용 가능 기능**:
- ✅ 이미지 합성 (주 2회)
- ❌ 영상 생성 (최초 3회 사용 후 불가)
- ⚠️ 워터마크 포함

**제한 사항**:
- 워터마크: "머리보존 AI" 로고 우측 하단 표시
- 영상 생성: 최초 3회 사용 후 유료 전환 필요
- 크레딧 이월: 불가 (매주 초기화)

**타겟 사용자**:
- 서비스 체험 사용자
- 가끔 사용하는 개인 사용자

---

### 2.2 프로 플랜 (Pro)

**가격**: ₩12,900/월 (약 $9.99)

**포함 크레딧**:
- 100 크레딧/월
- 크레딧 이월: 최대 3개월

**사용 가능 기능**:
- ✅ 이미지 합성 (~100회/월)
- ❌ 영상 생성 불가
- ✅ 워터마크 제거

**크레딧 소모**:
- 이미지 합성: 1 크레딧/회

**추가 혜택**:
- 빠른 처리 우선권
- 고화질 이미지 (1080p)
- 크레딧 이월 (최대 3개월)

**타겟 사용자**:
- 개인 헤어 디자이너
- 소규모 헤어샵
- 월 50-100회 사용하는 사용자

---

### 2.3 프로플러스 플랜 (Pro Plus)

**가격**: ₩29,900/월 (약 $24.99)

**포함 크레딧**:
- 100 크레딧/월
- 크레딧 이월: 최대 3개월

**사용 가능 기능**:
- ✅ 이미지 합성 (~100회/월 또는 ~50회 이미지+영상)
- ✅ 영상 생성 (~50회/월)
- ✅ 워터마크 제거

**크레딧 소모**:
- 이미지 합성: 1 크레딧/회
- 영상 생성 (5초): 2 크레딧/회

**추가 혜택**:
- 프로 플랜의 모든 혜택
- 5초 릴스 영상 생성
- 우선 고객 지원
- 크레딧 이월 (최대 3개월)

**타겟 사용자**:
- 중대형 헤어샵
- 헤어 디자인 강사
- SNS 마케팅 활용 사용자
- 월 30-50회 영상 생성 사용자

---

## 3. 크레딧 시스템 설계

### 3.1 크레딧 소모 규칙

| 작업 | 크레딧 소모 | 비고 |
|------|------------|------|
| **이미지 합성** | 1 크레딧 | Face Swap (Kling API) |
| **영상 생성 (5초)** | 2 크레딧 | 이미지 → 영상 변환 (Kling API) |
| **이미지 + 영상 (세트)** | 3 크레딧 | 1회 전체 작업 |

### 3.2 크레딧 충전 규칙

#### 무료 플랜
- **최초 가입**: 3 크레딧 (이미지+영상 세트 3회)
- **매주 월요일 오전 9시**: 2 크레딧 자동 충전 (이미지만 2회)
- **이월**: 불가 (매주 초기화)

#### 유료 플랜 (프로/프로플러스)
- **매월 구독 갱신 시**: 100 크레딧 충전
- **이월**: 최대 3개월 (예: 1월 미사용 크레딧 → 4월까지 유효)
- **다운그레이드 시**: 남은 크레딧 유지 (이월 규칙 동일)

### 3.3 크레딧 이월 예시

**시나리오**: 프로플러스 사용자가 1월에 30 크레딧만 사용

| 월 | 충전 | 사용 | 이월 | 총 크레딧 |
|----|------|------|------|----------|
| 1월 | 100 | 30 | 70 | 100 |
| 2월 | 100 | 50 | 120 | 170 |
| 3월 | 100 | 80 | 140 | 220 |
| 4월 | 100 | 100 | **70 소멸** | 240 → 170 |

**설명**: 1월 크레딧 70개는 4월까지 유효하며, 5월에 소멸됩니다.

---

## 4. 추가 크레딧 구매

### 4.1 크레딧 패키지

| 패키지 | 크레딧 | 가격 (원) | 가격 (달러) | 크레딧당 가격 |
|--------|--------|----------|------------|--------------|
| **소형** | 50 | ₩6,900 | $4.99 | ₩138 ($0.10) |
| **중형** | 150 | ₩16,900 | $12.99 | ₩113 ($0.087) |
| **대형** | 300 | ₩25,900 | $19.99 | ₩86 ($0.067) |

### 4.2 구매 규칙
- **이월**: 구매한 크레딧은 구매일로부터 6개월간 유효
- **사용 우선순위**: 구독 크레딧 → 구매 크레딧 (먼저 만료되는 것부터)
- **환불**: 사용하지 않은 구매 크레딧은 구매일로부터 7일 이내 환불 가능

### 4.3 추가 구매 시나리오

**시나리오**: 프로플러스 사용자가 2월에 크레딧 부족

| 상황 | 크레딧 | 설명 |
|------|--------|------|
| 2월 초 | 100 | 구독 갱신으로 100 크레딧 충전 |
| 2월 15일 | 0 | 100 크레딧 모두 사용 |
| 2월 15일 | +150 | 중형 패키지 구매 (₩16,900) |
| 2월 말 | 50 | 150 크레딧 중 100 크레딧 사용 |
| 3월 초 | 150 | 구독 갱신 (100) + 구매 크레딧 (50) |

---

## 5. 다운그레이드 및 업그레이드

### 5.1 업그레이드 (프로 → 프로플러스)

**처리 방식**: 즉시 적용
- 기존 플랜 취소
- 새 플랜 즉시 시작
- 남은 크레딧 유지 (이월 규칙 동일)

**비용 처리**:
- 기존 플랜 환불: 없음 (일할 계산 없음)
- 새 플랜 전액 결제

**예시**:
- 1월 15일 프로 플랜 가입 (₩12,900)
- 1월 20일 프로플러스로 업그레이드 (₩29,900 추가 결제)
- 총 비용: ₩42,800 (1월)

### 5.2 다운그레이드 (프로플러스 → 프로)

**처리 방식**: 다음 결제일부터 적용
- 현재 플랜 유지 (다음 결제일까지)
- 다음 결제일에 새 플랜 시작
- 남은 크레딧 유지 (이월 규칙 동일)

**비용 처리**:
- 환불: 없음
- 다음 결제일부터 낮은 요금 적용

**예시**:
- 1월 15일 프로플러스 플랜 가입 (₩29,900)
- 1월 20일 프로로 다운그레이드 요청
- 2월 15일까지 프로플러스 유지
- 2월 15일부터 프로 플랜 시작 (₩12,900)

### 5.3 구독 취소

**처리 방식**: 다음 결제일부터 적용
- 현재 플랜 유지 (다음 결제일까지)
- 다음 결제일에 무료 플랜으로 전환
- 남은 크레딧: 다음 결제일까지 사용 가능, 이후 소멸

**환불**: 없음

---

## 6. 워터마크 규칙

### 6.1 워터마크 표시

**무료 플랜**:
- 위치: 우측 하단
- 내용: "머리보존 AI" 로고 + 텍스트
- 크기: 이미지 너비의 15%
- 투명도: 70%

**유료 플랜**:
- 워터마크 없음

### 6.2 워터마크 제거 조건

**조건**:
- 프로 또는 프로플러스 플랜 가입
- 크레딧 소모 시 자동 제거

**예외**:
- 무료 플랜에서 생성한 이미지는 유료 전환 후에도 워터마크 유지
- 재생성 시 워터마크 제거 가능

---

## 7. 결제 시스템

### 7.1 결제 수단
- **신용카드**: Visa, Mastercard, AMEX
- **간편결제**: 카카오페이, 네이버페이, 토스페이
- **해외 결제**: Stripe (달러 결제)

### 7.2 결제 주기
- **월간 구독**: 매월 자동 결제
- **연간 구독**: 향후 추가 예정 (20% 할인)

### 7.3 결제 실패 처리
- **1차 실패**: 3일 후 재시도
- **2차 실패**: 7일 후 재시도
- **3차 실패**: 구독 취소 (무료 플랜으로 전환)

### 7.4 환불 정책
- **구독료**: 환불 불가 (서비스 특성상)
- **추가 크레딧**: 구매일로부터 7일 이내, 미사용 시 환불 가능
- **환불 방법**: 원 결제 수단으로 환불

---

## 8. 사용자 인터페이스 (UI) 설계

### 8.1 크레딧 표시

**위치**: 앱 상단 우측
- 현재 크레딧 수 표시
- 클릭 시 크레딧 상세 페이지 이동

**표시 예시**:
```
💎 125 크레딧
```

### 8.2 크레딧 상세 페이지

**구성**:
1. **현재 크레딧**: 총 크레딧 수
2. **크레딧 내역**:
   - 구독 크레딧: 100 (3월 31일 만료)
   - 구매 크레딧: 25 (5월 15일 만료)
3. **사용 내역**: 최근 10건
4. **충전 버튼**: 추가 크레딧 구매

### 8.3 크레딧 부족 알림

**시나리오**: 사용자가 작업 시작 시 크레딧 부족

**알림 내용**:
```
크레딧이 부족합니다.
현재 크레딧: 0
필요 크레딧: 3 (이미지+영상)

[크레딧 충전하기] [취소]
```

### 8.4 구독 관리 페이지

**구성**:
1. **현재 플랜**: 프로플러스 (₩29,900/월)
2. **다음 결제일**: 2025년 2월 15일
3. **포함 크레딧**: 100 크레딧/월
4. **사용 가능 기능**: 이미지 합성, 영상 생성
5. **액션 버튼**:
   - [플랜 변경]
   - [구독 취소]
   - [결제 수단 변경]

---

## 9. 크레딧 소모 최적화 팁 (사용자 가이드)

### 9.1 이미지만 필요한 경우
- **프로 플랜 추천**: 월 100회 이미지 합성 가능
- **비용**: ₩12,900/월 (회당 ₩129)

### 9.2 영상도 필요한 경우
- **프로플러스 플랜 추천**: 월 50회 이미지+영상 가능
- **비용**: ₩29,900/월 (회당 ₩598)

### 9.3 크레딧 절약 팁
1. **이미지 먼저 확인**: 이미지 합성 후 만족하면 영상 생성
2. **크레딧 이월 활용**: 사용하지 않은 크레딧은 3개월 이월
3. **대형 패키지 구매**: 크레딧당 가격이 저렴함 (₩86 vs ₩138)

---

## 10. 시스템 구현 요구사항

### 10.1 데이터베이스 스키마

#### users 테이블
```sql
CREATE TABLE users (
  id UUID PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  subscription_plan VARCHAR(50) DEFAULT 'free', -- 'free', 'pro', 'pro_plus'
  subscription_status VARCHAR(50) DEFAULT 'active', -- 'active', 'canceled', 'past_due'
  subscription_start_date TIMESTAMP,
  next_billing_date TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### credits 테이블
```sql
CREATE TABLE credits (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  amount INT NOT NULL,
  type VARCHAR(50) NOT NULL, -- 'subscription', 'purchase', 'free'
  expires_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### credit_transactions 테이블
```sql
CREATE TABLE credit_transactions (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  amount INT NOT NULL, -- 양수: 충전, 음수: 사용
  type VARCHAR(50) NOT NULL, -- 'charge', 'use', 'expire'
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 10.2 API 엔드포인트

#### 크레딧 조회
```
GET /api/credits
Response: { total: 125, breakdown: [...] }
```

#### 크레딧 사용
```
POST /api/credits/use
Body: { amount: 3, description: "이미지+영상 생성" }
Response: { success: true, remaining: 122 }
```

#### 크레딧 구매
```
POST /api/credits/purchase
Body: { package: "medium" }
Response: { success: true, payment_url: "..." }
```

#### 구독 변경
```
POST /api/subscription/change
Body: { plan: "pro_plus" }
Response: { success: true, next_billing_date: "..." }
```

### 10.3 크론 작업 (Cron Jobs)

#### 매주 월요일 오전 9시: 무료 크레딧 충전
```javascript
cron.schedule('0 9 * * 1', async () => {
  const freeUsers = await db.users.findMany({ subscription_plan: 'free' });
  for (const user of freeUsers) {
    await db.credits.create({
      user_id: user.id,
      amount: 2,
      type: 'free',
      expires_at: addDays(new Date(), 7)
    });
  }
});
```

#### 매일 자정: 만료 크레딧 정리
```javascript
cron.schedule('0 0 * * *', async () => {
  await db.credits.deleteMany({
    expires_at: { lt: new Date() }
  });
});
```

---

## 11. 마케팅 전략

### 11.1 무료 플랜 활용
- **목적**: 서비스 체험 및 바이럴 마케팅
- **전략**: 매주 2회 무료 제공으로 지속적인 사용 유도
- **전환**: 영상 생성 필요 시 유료 전환 유도

### 11.2 프로 플랜 타겟
- **타겟**: 개인 헤어 디자이너, 소규모 헤어샵
- **메시지**: "월 ₩12,900으로 100회 이미지 합성"
- **전환**: 영상 필요 시 프로플러스 업그레이드 유도

### 11.3 프로플러스 플랜 타겟
- **타겟**: 중대형 헤어샵, SNS 마케팅 활용 사용자
- **메시지**: "SNS용 5초 릴스 영상 무제한 생성"
- **전환**: 크레딧 부족 시 추가 구매 유도

---

## 12. 결론

머리보존 AI의 구독 요금제 및 크레딧 시스템은 **사용자 친화적이고 수익성 있는 구조**로 설계되었습니다. 무료 플랜으로 서비스를 체험하고, 필요에 따라 프로 또는 프로플러스 플랜으로 전환할 수 있으며, 크레딧 이월 및 추가 구매 옵션으로 유연성을 제공합니다. 이 시스템은 Manus의 크레딧 시스템과 유사하게 설계되어 사용자에게 익숙한 경험을 제공하며, Kling AI를 활용하여 비용 효율적으로 운영할 수 있습니다.
